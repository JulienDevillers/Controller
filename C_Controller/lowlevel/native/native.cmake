SET(CMAKE_C_COMPILER_WORKS 1)
SET(CMAKE_C_COMPILER gcc)
SET(CMAKE_CXX_COMPILER_WORKS 1)
SET(CMAKE_CXX_COMPILER g++)
set(CMAKE_ASM_COMPILER  gcc)
set(CMAKE_AR ar)
set(CMAKE_OBJCOPY objcopy)
set(CMAKE_OBJDUMP objdump)
set(SIZE size)

SET(LOWLEVEL_SRC_DIR ${CMAKE_SOURCE_DIR}/lowlevel/${TARGET})
SET(FREERTOS_DIR_X86 ${LOWLEVEL_SRC_DIR}/FreeRTOS-Sim/)
SET(FREERTOS_SRC_DIR_X86 ${FREERTOS_DIR_X86}/Source/)
SET(FREERTOS_INC_DIR_X86 ${FREERTOS_DIR_X86}/Source/include/)
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -pthread") 
set(FREERTOS_SRC_X86 
	${LOWLEVEL_SRC_DIR}/vassertcall.c
	${FREERTOS_SRC_DIR_X86}/croutine.c
	${FREERTOS_SRC_DIR_X86}/event_groups.c
	${FREERTOS_SRC_DIR_X86}/list.c
	${FREERTOS_SRC_DIR_X86}/queue.c
	${FREERTOS_SRC_DIR_X86}/tasks.c
	${FREERTOS_SRC_DIR_X86}/timers.c
	${FREERTOS_SRC_DIR_X86}/portable/MemMang/heap_3.c
	${FREERTOS_SRC_DIR_X86}/portable/GCC/POSIX/port.c)

set(LOWLEVEL_SOURCES 
	${LOWLEVEL_INC_DIR}/hardware_simulation.h
	${LOWLEVEL_SRC_DIR}/hardware_simulation.c
	${LOWLEVEL_INC_DIR}/hardware_serial.h
	${LOWLEVEL_SRC_DIR}/hardware_serial.c)

include_directories(${LOWLEVEL_SRC_DIR} ${FREERTOS_INC_DIR_X86} ${FREERTOS_SRC_DIR_X86} ${FREERTOS_SRC_DIR_X86}/portable/GCC/POSIX/)
target_sources(${EXECUTABLE} PRIVATE ${SHARED_SOURCES} ${FREERTOS_SRC_X86} ${LOWLEVEL_SOURCES})
